{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="card">
    <div class="card-body">
      <button type="button"
              class="btn-close float-end"
              aria-label="Close"
              onclick="window.history.back()"></button>

      <h3 class="card-title">HAS-BLED Score</h3>
      <p class="text-muted small">
        Major bleeding risk on anticoagulation (mostly AF populations). A high score should prompt risk-factor
        modification, not automatic avoidance of anticoagulation.
      </p>

      <form method="post">
        {% set items = [
          ('htn', 'Hypertension (SBP &gt; 160 mmHg) (+1)'),
          ('renal', 'Abnormal renal function (+1)'),
          ('liver', 'Abnormal liver function (+1)'),
          ('stroke', 'History of stroke (+1)'),
          ('bleeding', 'History/predisposition to bleeding (+1)'),
          ('labile_inr', 'Labile INR (if on warfarin) (+1)'),
          ('elderly_65', 'Age &gt; 65 (+1)'),
          ('drugs', 'Drugs predisposing to bleeding (e.g. antiplatelets, NSAIDs) (+1)'),
          ('alcohol', 'Alcohol excess (+1)')
        ] %}
        {% for key, label in items %}
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="{{ key }}" id="{{ key }}">
            <label class="form-check-label" for="{{ key }}">{{ label }}</label>
          </div>
        {% endfor %}

        <button type="submit" class="btn btn-primary mt-3">Calculate HAS-BLED</button>
      </form>

      {% if score is defined %}
        <hr>
        <h5>Result</h5>
        <p class="fs-5">HAS-BLED score: <strong>{{ score }}</strong></p>
        <p class="small text-muted mb-0">
          Score ≥ 3 is often considered “high risk” – focus on identifying and treating modifiable bleeding risks.
        </p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
