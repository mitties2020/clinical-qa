{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="card">
    <div class="card-body">
      <button type="button"
              class="btn-close float-end"
              aria-label="Close"
              onclick="window.history.back()"></button>

      <h3 class="card-title">Wells Score – Pulmonary Embolism</h3>
      <p class="text-muted small">
        Pre-test probability only. Use together with local PE pathway, D-dimer and imaging strategy.
      </p>

      <form method="post">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="dvt_signs" id="dvt_signs">
          <label class="form-check-label" for="dvt_signs">
            Clinical signs and symptoms of DVT (3.0)
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="pe_more_likely" id="pe_more_likely">
          <label class="form-check-label" for="pe_more_likely">
            PE is more likely than alternative diagnosis (3.0)
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="hr_gt_100" id="hr_gt_100">
          <label class="form-check-label" for="hr_gt_100">
            Heart rate &gt; 100 bpm (1.5)
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="immobilisation" id="immobilisation">
          <label class="form-check-label" for="immobilisation">
            Immobilisation &ge; 3 days or surgery in previous 4 weeks (1.5)
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="prev_vte" id="prev_vte">
          <label class="form-check-label" for="prev_vte">
            Previous DVT/PE (1.5)
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="haemoptysis" id="haemoptysis">
          <label class="form-check-label" for="haemoptysis">
            Haemoptysis (1.0)
          </label>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" name="malignancy" id="malignancy">
          <label class="form-check-label" for="malignancy">
            Malignancy (on treatment, treated &lt; 6 months, or palliative) (1.0)
          </label>
        </div>

        <button type="submit" class="btn btn-primary">Calculate Wells PE score</button>
      </form>

      {% if score is defined %}
        <hr>
        <h5>Result</h5>
        <p class="fs-5">Wells PE score: <strong>{{ '%.1f'|format(score) }}</strong></p>
        <p class="small text-muted">
          Common interpretation: &le; 4 “PE unlikely”, &gt; 4 “PE likely”.
          Always apply within a full diagnostic algorithm.
        </p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
