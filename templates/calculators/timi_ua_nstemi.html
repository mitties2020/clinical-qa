{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="card">
    <div class="card-body">
      <button type="button"
              class="btn-close float-end"
              aria-label="Close"
              onclick="window.history.back()"></button>

      <h3 class="card-title">TIMI Risk Score (UA/NSTEMI)</h3>
      <p class="text-muted small">
        One point for each criterion present. Intended for patients with UA/NSTEMI; educational use only.
      </p>

      <form method="post">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="age65" id="age65">
          <label class="form-check-label" for="age65">Age &ge; 65 years</label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="three_risks" id="three_risks">
          <label class="form-check-label" for="three_risks">
            &ge; 3 CAD risk factors (HTN, DM, dyslipidaemia, smoking, FHx)
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="known_cad" id="known_cad">
          <label class="form-check-label" for="known_cad">
            Known CAD (stenosis &ge; 50%)
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="asa_7d" id="asa_7d">
          <label class="form-check-label" for="asa_7d">
            Aspirin use in the last 7 days
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="severe_angina" id="severe_angina">
          <label class="form-check-label" for="severe_angina">
            &ge; 2 episodes of angina in last 24 hours
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="st_deviation" id="st_deviation">
          <label class="form-check-label" for="st_deviation">
            ST deviation &ge; 0.5 mm
          </label>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" name="elevated_markers" id="elevated_markers">
          <label class="form-check-label" for="elevated_markers">
            Elevated cardiac markers
          </label>
        </div>

        <button type="submit" class="btn btn-primary">Calculate TIMI score</button>
      </form>

      {% if score is defined %}
        <hr>
        <h5>Result</h5>
        <p class="fs-5">TIMI risk score: <strong>{{ score }}</strong> / 7</p>
        <p class="small text-muted">
          Higher scores are associated with higher short-term risk of adverse ischaemic events.
          Interpret with contemporary ACS guidelines and senior input.
        </p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
