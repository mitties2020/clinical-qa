<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>VividMedi â€” Clinical Intelligence Engine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="app-root">
    <div class="shell">
      <div class="layout">

        <!-- SIDEBAR -->
        <aside class="sidebar">
          <div class="sidebar-header">
            <div class="sidebar-brand">
              <img
                class="brand-logo"
                src="{{ url_for('static', filename='assets/vividmedi-icon.svg') }}"
                alt="VividMedi"
              />
              <div class="brand-text">
                <div class="brand-title">VividMedi</div>
                <div class="sidebar-title">Clinical Intelligence Engine</div>
              </div>
            </div>

            <input id="sidebarSearch" class="topic-search" type="text" placeholder="Search saved..." />
          </div>

          <div class="sidebar-subhead">Saved Clinical Questions</div>
          <div id="savedQuestionsList" class="conversation-list"></div>

          <div class="sidebar-subhead">Consultation Notes (saved)</div>
          <div id="savedWrList" class="conversation-list"></div>

          <div class="sidebar-footer">
            <span class="sidebar-hint">Locally stored â€¢ Per device</span>
          </div>
        </aside>

        <!-- MAIN -->
        <div class="main-region">

          <!-- HEADER (no sentence) -->
          <header class="header">
            <div class="brand-header">
              <img
                class="brand-header__logo"
                src="{{ url_for('static', filename='assets/vividmedi-icon.svg') }}"
                alt="VividMedi"
              />
              <div class="brand-header__text">
                <h1 class="brand-header__name">VividMedi</h1>
                <div class="brand-header__tagline">Clinical Intelligence Engine</div>
              </div>
            </div>
          </header>

          <!-- TOP ROW -->
          <main class="grid">

            <!-- CLINICAL -->
            <section class="card input-card">
              <label class="label" for="clinicalQuestion">Clinical</label>

              <div style="display:flex; gap:10px; align-items:center; margin-bottom:10px;">
                <label class="label label-tight" style="margin:0;">Mode</label>
                <select id="modeSelect" class="topic-search" style="max-width:260px;">
                  <option value="clinical" selected>Clinical</option>
                  <option value="dva_new">DVA D0904 (New referral)</option>
                  <option value="dva_renew">DVA D0904 (Renewal / EoC-based)</option>
                </select>
              </div>

              <textarea
                id="clinicalQuestion"
                class="textarea"
                rows="7"
                placeholder="Enter clinical question OR paste DVA details. Enter = Generate, Shift+Enter = new line."
              ></textarea>

              <div class="actions actions-compact">
                <button id="generateBtn" class="btn btn-primary" type="button">Generate</button>
                <button id="dictateQuestionBtn" class="btn" type="button">ðŸŽ™ Dictate</button>
                <button id="incorrectQuestionBtn" class="btn" type="button">Incorrect</button>
                <button id="clearQuestionBtn" class="btn btn-danger" type="button">Clear</button>
              </div>

              <div id="qStatus" class="mic-status">Question mic: idle</div>
            </section>

            <!-- ANSWERS -->
            <section class="card output-card">
              <div class="output-header">
                <div class="output-header-flex">
                  <h2 class="output-title-inline">Answers</h2>
                  <button id="copyAllBtn" class="copy-btn" disabled type="button">Copy All</button>
                </div>
              </div>

              <div id="answerLoader" class="answer-loader hidden">
                <div class="loader"></div>
                <div class="loader-text">Generating structured answerâ€¦</div>
              </div>

              <div class="output-body">
                <div id="answer" class="answer placeholder">Your answer will appear here.</div>
              </div>
            </section>
          </main>

          <div class="divider-spacer"></div>

          <!-- CONSULTATION NOTES -->
          <section class="card wr-card">
            <div class="wr-head">
              <div class="label wr-label">Consultation Notes</div>

              <div class="actions actions-compact">
                <button id="dictateWrBtn" class="btn" type="button">ðŸŽ™ Dictate</button>
                <button id="incorrectWrBtn" class="btn" type="button">Incorrect</button>
                <button id="copyWrBtn" class="btn" type="button">Copy</button>
                <button id="saveWrBtn" class="btn btn-primary" type="button">Save</button>
                <button id="newWrBtn" class="btn btn-danger" type="button">New</button>
              </div>
            </div>

            <textarea id="wrNote" class="textarea" rows="16" placeholder="Dictate or type freely hereâ€¦"></textarea>
            <div id="wrStatus" class="mic-status">Notes mic: idle</div>
          </section>

        </div>
      </div>
    </div>
  </div>

  <script>
    // PASTE YOUR EXISTING WORKING JS HERE (the big window.addEventListener(...) block)
  </script>
</body>
</html>
