<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Clinical Engine | EBM Session</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="app-root">
    <div class="shell">
      <div class="layout">

        <!-- SIDEBAR -->
        <aside class="sidebar">
          <div class="sidebar-header">
            <div class="sidebar-brand">
              <div class="brand-logo"></div>
              <div class="brand-text">
                <div class="brand-title">EBM</div>
                <div class="sidebar-title">EBM Session</div>
              </div>
            </div>

            <input
              id="sidebarSearch"
              class="topic-search"
              type="text"
              placeholder="Search saved..."
            />
          </div>

          <div class="sidebar-subhead">Saved Clinical Questions</div>
          <div id="savedQuestionsList" class="conversation-list"></div>

          <div class="sidebar-subhead">Consultation Notes (saved)</div>
          <div id="savedWrList" class="conversation-list"></div>

          <div class="sidebar-footer">
            <span class="sidebar-hint">Locally stored â€¢ Per device</span>
          </div>
        </aside>

        <!-- MAIN -->
        <div class="main-region">
          <header class="header">
            <h1 class="title">CLINICAL ENGINE</h1>
            <p class="subtitle">Clinical questions (top) + consultation notes (below). Dictation separated.</p>
          </header>

          <!-- TOP ROW -->
          <main class="grid">
            <!-- QUESTION -->
            <section class="card input-card">
              <label class="label" for="clinicalQuestion">Clinical Question</label>
              <textarea
                id="clinicalQuestion"
                class="textarea"
                rows="6"
                placeholder="Type or dictate a clinical questionâ€¦"
              ></textarea>

              <div class="actions actions-compact">
                <button id="generateBtn" class="btn btn-compact" type="button">Generate</button>
                <button id="dictateQuestionBtn" class="btn btn-compact" type="button">ðŸŽ™ Dictate</button>
                <button id="incorrectQuestionBtn" class="btn btn-compact" type="button">Incorrect</button>
                <button id="clearQuestionBtn" class="btn btn-compact" type="button">Clear</button>
              </div>

              <div id="qStatus" class="mic-status">Question mic: idle</div>
            </section>

            <!-- ANSWER -->
            <section class="card output-card">
              <div class="output-header">
                <h2 class="output-title">Answers</h2>
                <button id="copyAllBtn" class="copy-btn main-copy-btn" disabled type="button">Copy All</button>
              </div>

              <div id="answerLoader" class="answer-loader hidden">
                <div class="loader"></div>
                <div class="loader-text">Generating structured answerâ€¦</div>
              </div>

              <div class="output-body">
                <div id="answer" class="answer placeholder">
                  Your answer will appear here.
                </div>
              </div>
            </section>
          </main>

          <div class="divider-spacer"></div>

          <!-- CONSULTATION NOTES -->
          <section class="card wr-card">
            <div class="wr-head">
              <div>
                <div class="label wr-label">Consultation Notes</div>
                <div class="wr-sub">Dictation never triggers the Clinical Engine.</div>
              </div>

              <div class="actions actions-compact">
                <button id="dictateWrBtn" class="btn btn-compact" type="button">ðŸŽ™ Dictate</button>
                <button id="incorrectWrBtn" class="btn btn-compact" type="button">Incorrect</button>
                <button id="copyWrBtn" class="btn btn-compact" type="button">Copy</button>
                <button id="saveWrBtn" class="btn btn-compact" type="button">Save</button>
                <button id="newWrBtn" class="btn btn-compact" type="button">New</button>
              </div>
            </div>

            <textarea
              id="wrNote"
              class="textarea"
              rows="16"
              placeholder="Dictate or type freely hereâ€¦"
            ></textarea>

            <div id="wrStatus" class="mic-status">Notes mic: idle</div>
          </section>

        </div>
      </div>
    </div>
  </div>

<!-- JS unchanged -->
<script>
/* your existing JS continues exactly as before */
</script>

</body>
</html>
